---
import type { ImageListProps } from "../models/ImageList";
import { processPhotographyImage } from "./processPhotographyImage";
import Photograph from "./Photograph.astro";

type Props = ImageListProps;

const { images, dir } = Astro.props;

const photos = await Promise.all(
  images.map((image) => processPhotographyImage(image, dir))
);
---

{
  photos.map((photo) => (
    <figure>
      <h3 set:html={photo.title} />
      <Photograph {...photo} />
      <figcaption set:html={photo.caption} />
    </figure>
  ))
}

<style>
  figure {
    padding: 0;

    display: flex;
    flex-direction: column;
  }
</style>
